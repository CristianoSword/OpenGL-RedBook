#include <GL/glut.h>

// Function to display the scene
void display () {
   // Define stipple patterns: "fly" and "halftone"
   GLubyte fly[] = {
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x03, 0x80, 0x01, 0xC0, 0x06, 0xC0, 0x03, 0x60, 
      0x04, 0x60, 0x06, 0x20, 0x04, 0x30, 0x0C, 0x20, 
      0x04, 0x18, 0x18, 0x20, 0x04, 0x0C, 0x30, 0x20,
      0x04, 0x06, 0x60, 0x20, 0x44, 0x03, 0xC0, 0x22, 
      0x44, 0x01, 0x80, 0x22, 0x44, 0x01, 0x80, 0x22, 
      0x44, 0x01, 0x80, 0x22, 0x44, 0x01, 0x80, 0x22,
      0x44, 0x01, 0x80, 0x22, 0x44, 0x01, 0x80, 0x22, 
      0x66, 0x01, 0x80, 0x66, 0x33, 0x01, 0x80, 0xCC, 
      0x19, 0x81, 0x81, 0x98, 0x0C, 0xC1, 0x83, 0x30,
      0x07, 0xe1, 0x87, 0xe0, 0x03, 0x3f, 0xfc, 0xc0, 
      0x03, 0x31, 0x8c, 0xc0, 0x03, 0x33, 0xcc, 0xc0, 
      0x06, 0x64, 0x26, 0x60, 0x0c, 0xcc, 0x33, 0x30,
      0x18, 0xcc, 0x33, 0x18, 0x10, 0xc4, 0x23, 0x08, 
      0x10, 0x63, 0xC6, 0x08, 0x10, 0x30, 0x0c, 0x08, 
      0x10, 0x18, 0x18, 0x08, 0x10, 0x00, 0x00, 0x08};

   GLubyte halftone[] = {
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55,
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55,
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55,
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55,
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55, 
      0xAA, 0xAA, 0xAA, 0xAA, 0x55, 0x55, 0x55, 0x55};

    glClear(GL_COLOR_BUFFER_BIT);  // Clear the screen
    glColor3f(1.0, 1.0, 1.0);      // Set color to white
    // Draw a solid, unstippled rectangle
    glRectf(25.0, 25.0, 125.0, 125.0); 

    glEnable(GL_POLYGON_STIPPLE);  // Enable polygon stippling
    glPolygonStipple(fly);         // Set stipple pattern to "fly"
    glRectf(125.0, 25.0, 225.0, 125.0);  // Draw rectangle with "fly" stipple

    glPolygonStipple(halftone);    // Set stipple pattern to "halftone"
    glRectf(225.0, 25.0, 325.0, 125.0);  // Draw rectangle with "halftone" stipple

    glPolygonStipple(fly);         // Set stipple pattern back to "fly"
    glColor3f(1.0, 0.0, 0.0);      // Change color to red
    glRectf(325.0, 25.0, 425.0, 125.0);  // Draw red rectangle with "fly" stipple
    
    glDisable(GL_POLYGON_STIPPLE); // Disable polygon stippling
    glFlush();  // Flush the OpenGL pipeline, forcing the execution of all commands

}

// Initialization function
void init (void) {
    glClearColor(0.0, 0.0, 0.0, 0.0); // Set the background color to black
    glShadeModel(GL_FLAT);  // Set shading model to flat shading
}

// Reshape function to adjust the viewport on window resizing
void reshape (int w, int h)
{
   glViewport (0, 0, (GLsizei) w, (GLsizei) h);  // Set the viewport size
   glMatrixMode (GL_PROJECTION);  // Set matrix mode to projection
   glLoadIdentity ();  // Reset the projection matrix
   gluOrtho2D (0.0, (GLdouble) w, 0.0, (GLdouble) h);  // Set an orthographic projection
}

// Main function where GLUT is initialized and the main loop is started
int main(int argc, char** argv) {
    glutInit(&argc, argv);  // Initialize GLUT
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);  // Set display mode (single buffer, RGB color)
    glutInitWindowSize(450, 150);  // Set window size
    glutCreateWindow("OpenGL 10*Code - Poly Stippled - 12/11/2024 22:46");  // Create window with title
    init();  // Call the initialization function
    glutDisplayFunc(display);  // Register the display function
    glutReshapeFunc(reshape);  // Register the reshape function
    glutMainLoop();  // Enter the GLUT main loop
    return 0;
}
